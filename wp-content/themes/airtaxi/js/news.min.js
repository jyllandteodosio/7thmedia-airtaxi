jQuery(function(e){function n(a,s){$url=""+t+"/wp-json/wp/v2/posts",$params={page:a,per_page:6,orderby:"date",order:"desc",categories:s};var i=6;1>=a&&(i=0);var o=e.ajax({url:$url,method:"GET",data:$params,crossDomain:!0,success:function(n){n&&e.each(n,function(n,t){var a="";if(t.thumbnail)var a='<figure><img src="'+t.thumbnail+'" alt="'+t.title.rendered+'"></figure>';e(".news-landing-container").append('<div class="news-landing-item" data-news-id="'+n+1+i+'"><article><div class="news-title-container"><h2 class="news-landing-title">'+t.title.rendered+'</h2></div><a href="'+t.link+'" class="news-item-image">'+a+'</a><div class="news-landing-excerpt">'+t.excerpt.rendered+'<a href="'+t.link+'" class="read-more">Read More</a></div><div class="news-landing-content"></div></article></div>')})}});o.done(function(t,i,o){{var r=parseInt(a,10);e(".news-landing-item").length}totalEntries=parseInt(o.getResponseHeader("X-WP-Total"),10),totalPages=parseInt(o.getResponseHeader("X-WP-TotalPages"),10),r===totalPages?e(".news-load-btn")&&(e(".news-load-btn").remove(),e(".news-load-more").remove()):totalPages>r&&(e(".news-load-btn").remove(),e(".news-load-more").remove(),e(".news-landing-container").append('<div class="news-load-more"><button type="button" class="news-load-btn" data-next-page="'+(r+1)+'" data-next-cat="'+s+'">View More Posts</button></div>')),e(".news-load-btn").click(function(){var t=e(this).attr("data-next-page"),a=e(this).attr("data-news-cat");n(t,a)})})}var t=window.location.protocol+"//"+window.location.host;"http://localhost"==t&&(t+="/Projects/airtaxi");var a=e("html, body");e(".genesis-nav-menu a").click(function(){var n=(e.attr(this,"href"),e(this).attr("href").split("#")[1]);return console.log(n),a.animate({scrollTop:e("#"+n).offset().top-140},1e3,function(){window.location.hash=n}),!1}),e(".news-landing-container").ready(function(){e(this).find(".news-landing-excerpt figure").remove(),e(this).find(".related-news-excerpt figure").remove()}),e(".news-landing-excerpt .read-more, .news-landing-excerpt .readmore").on("click",function(n){n.preventDefault(),$this=e(this),$postID=e(this).parents(".news-landing-item").attr("data-news-id"),$postURL=e(this).attr("href"),window.history.pushState("","Title",$postURL);window.location.protocol+"//"+window.location.host+window.location.pathname.replace("news/","");$url=""+t+"/wp-json/wp/v2/posts/"+$postID,e.ajax({url:$url,method:"GET",crossDomain:!0,success:function(n){n&&($this.parents("article").find(".news-landing-content").hide(),$this.parents("article").find(".news-landing-content").html(n.content.rendered+'<div class="news-item-close"><a href="#news-'+$postID+'" class="news-close-btn, read-more">Close Full Story</a></div>'),$this.parents("article").find(".news-landing-content").fadeIn(),$this.parents(".news-landing-excerpt").fadeOut().hide(),e(".news-item-close").click(function(){var n=e(this).parents(".news-landing-item");return n=n.length,n.length?(e("html, body").animate({scrollTop:n.offset().top-40},1200),!1):(window.history.back(),e(this).parents(".news-landing-content").fadeOut().hide(),e(this).parents("article").find(".news-landing-excerpt").fadeIn(),void e(this).parents(".news-landing-content").html(""))}))}})}),e(".news-load-btn").on("click",function(){var t=e(this).attr("data-next-page"),a=e(this).attr("data-news-cat");n(t,a)})});